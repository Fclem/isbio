{% extends "base.html" %}

{% load bootstrap_toolkit %}

{% block title %}Scripts{% endblock %} 

{% block content %}
<div class="row-fluid">    
  <div class="span3">
    <ul class="nav  nav-pills nav-stacked">
      <li class="{{ categ_status }}"> <a href="#">General</a> </li>
      <li class="{{ categ_status }}"> <a href="#">Visualization</a> </li>
      <li class="{{ categ_status }}"> <a href="#">Screening</a> </li>
      <li class="{{ categ_status }}"> <a href="#">Sequencing</a>  </li>
    </ul>
  </div>
  
  <div class="span9">
    <ul class="breadcrumb pull-right">
      <li> <a href="#">A-Z</a> <span class="divider">/</span> </li> 
      <li class="active">Z-A</li>
    </ul>
    
    <div class="container-fluid">
    <!-- TABLES -->
    <table class="table table-striped">
        <head>
            <tr>
                <th>Logo</th>
                <th>Name</th>
                <th>Inline description</th>
                <th>
                  <a href="/new" class="btn btn-mini btn-inverse">
                    <i class="icon-plus"></i> Create New Script
                  </a>
                </th>
            </tr>
        </head>
        <tbody>
            {% for scr in script_list %}
            <tr>
                <td><img src={{ scr.logo }} width="75" height="75"></td>
                <td>{{ scr.name }}</td>
                <td><a href="#" data-toggle="modal" class=" script" data-target="#Apply" data-form="/read-descr/" data-param={{ scr.id }}>{{ scr.inln }}</a></td>
                <td><a href="#" data-toggle="modal" class="btn btn-inverse script" data-target="#Apply" data-form="/read-form/" data-param={{ scr.id }}>Apply</a></td>         
            </tr>
            {% endfor %}
        </tbody>
    </table>
    </div>
  </div>
</div>

<div id="Apply" class="modal hide fade" role="dialog"  aria-hidden="true"></div>


<script>
    $(".script").click(function(ev) { 
        ev.preventDefault(); // prevent navigation
        var url = $(this).data("form"); // get the new url
        var par = $(this).data("param"); // get the new url
        $("#Apply").load(url+par, function() { // load the url into the modal
            $(this).modal('show'); 
        });
        return false; // prevent the click propagation
    });
</script>

{% endblock %}